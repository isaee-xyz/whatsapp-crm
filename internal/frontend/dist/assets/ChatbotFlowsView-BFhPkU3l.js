import{d as ie,r as k,x as de,Q as U,c as _,h as s,a as l,w as a,g as re,b as o,i as d,v as f,l as h,I as $,J as I,F as x,s as w,j as z,S as ue,k as D,t as pe,K as y,o as p}from"./index-CYNh7eqI.js";import{a as J,_ as Q}from"./CardContent.vue_vue_type_script_setup_true_lang-BVSlREZs.js";import{_ as ce,a as me}from"./CardTitle.vue_vue_type_script_setup_true_lang-C5-EVre-.js";import{_ as v}from"./Button.vue_vue_type_script_setup_true_lang-CdpToHaS.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-c8YZDCZO.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-BiSM-I6O.js";import{_ as F}from"./Textarea.vue_vue_type_script_setup_true_lang-qPA_yzOk.js";import{_ as S}from"./Badge.vue_vue_type_script_setup_true_lang-lXziiQoX.js";import{_ as _e}from"./ScrollArea.vue_vue_type_script_setup_true_lang-BYu-HJVo.js";import{_ as fe,a as ge,b as ve,c as be,d as ye,e as he}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BYVwNXX_.js";import{_ as xe}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-CvBIzWt_.js";import{A as we}from"./arrow-left-DE60ug_1.js";import{P as T,T as E,a as ke}from"./trash-2-ExN6Amm1.js";import{a as j}from"./createLucideIcon-CJWRy_ZI.js";import{W as Z}from"./workflow-Ckj7YDG5.js";import{P as Ve}from"./pause-B2KHdOUW.js";import{P as Ce}from"./play-Dq87bFQT.js";/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=j("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=j("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=j("GripVerticalIcon",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Se={class:"flex flex-col h-full"},Pe={class:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"},Ie={class:"flex h-16 items-center justify-between px-6"},Te={class:"flex items-center gap-4"},Ae={class:"flex-1 overflow-y-auto pr-4 min-h-0"},Me={class:"grid gap-6 py-4"},De={class:"grid gap-4"},Ne={class:"grid grid-cols-2 gap-4"},Oe={class:"space-y-2"},Be={class:"space-y-2"},ze={class:"space-y-2"},Ee={class:"grid grid-cols-2 gap-4"},je={class:"space-y-2"},Re={class:"space-y-2"},We={class:"space-y-4"},Le={class:"space-y-2"},qe={key:0,class:"space-y-4 p-4 border rounded-lg bg-muted/10"},Ge={class:"flex items-center gap-2 mb-2"},He={class:"grid grid-cols-4 gap-4"},Ke={class:"space-y-2"},Je=["value"],Qe={class:"col-span-3 space-y-2"},Ze={class:"space-y-2"},Xe={class:"space-y-4"},Ye={class:"flex items-center justify-between"},et={key:0,class:"text-center py-8 border rounded-lg border-dashed"},tt={key:1,class:"space-y-2"},ot=["onClick"],lt={class:"flex-1 font-medium"},st={class:"text-sm text-muted-foreground truncate max-w-[200px]"},at={class:"flex items-center gap-1"},nt={key:0,class:"p-4 border-t bg-muted/20 space-y-4"},it={class:"grid grid-cols-2 gap-4"},dt={class:"space-y-2"},rt={class:"space-y-2"},ut={class:"space-y-2"},pt=["onUpdate:modelValue"],ct=["value"],mt={key:0,class:"space-y-2"},_t={key:1,class:"space-y-4 p-4 border rounded-lg bg-muted/10"},ft={class:"flex items-center justify-between mb-2"},gt={class:"flex items-center gap-2"},vt={class:"text-xs text-muted-foreground"},bt={key:0,class:"text-center py-4 text-muted-foreground text-sm"},yt={key:1,class:"space-y-2"},ht={key:2,class:"space-y-4 p-4 border rounded-lg bg-muted/10"},xt={class:"flex items-center gap-2 mb-2"},wt={class:"grid grid-cols-4 gap-4"},kt={class:"space-y-2"},Vt=["onUpdate:modelValue"],Ct=["value"],Ut={class:"col-span-3 space-y-2"},$t={class:"text-xs text-muted-foreground"},Ft={key:0,class:"space-y-2"},St={class:"grid grid-cols-2 gap-4"},Pt={class:"space-y-2"},It={class:"space-y-2"},Tt={class:"grid grid-cols-2 gap-4"},At={class:"space-y-2"},Mt=["onUpdate:modelValue"],Dt=["value"],Nt={class:"space-y-2"},Ot={key:3,class:"space-y-2"},Bt={class:"space-y-2"},zt={class:"flex items-center gap-4"},Et={class:"flex items-center gap-2"},jt=["id","onUpdate:modelValue"],Rt={key:0,class:"flex items-center gap-2"},Wt={class:"p-6 grid gap-4 md:grid-cols-2 lg:grid-cols-3"},Lt={class:"flex items-start justify-between"},qt={class:"flex items-center gap-3"},Gt={class:"h-10 w-10 rounded-lg bg-purple-100 dark:bg-purple-900 flex items-center justify-center"},Ht={class:"text-sm text-muted-foreground mb-3"},Kt={key:0,class:"flex flex-wrap gap-1 mb-3"},Jt={class:"text-xs text-muted-foreground"},Qt={class:"p-4 pt-0 flex items-center justify-between border-t mt-auto"},Zt={class:"flex gap-2"},vo=ie({__name:"ChatbotFlowsView",setup(Xt){const A=k([]),R=k(!0),V=k(!1),N=k(!1),C=k(null),g=k(null),O={url:"",method:"POST",headers:{},body:""},i=k({name:"",description:"",trigger_keywords:"",initial_message:"",completion_message:"",on_complete_action:"none",completion_config:{...O},enabled:!0,steps:[]}),W={url:"",method:"GET",headers:{},body:"",response_path:"",fallback_message:""},L={step_name:"",step_order:0,message:"",message_type:"text",input_type:"text",input_config:{},api_config:{...W},buttons:[],validation_regex:"",validation_error:"Invalid input. Please try again.",store_as:"",next_step:"",retry_on_invalid:!0,max_retries:3};de(async()=>{await B()});async function B(){R.value=!0;try{const r=await U.listFlows(),e=r.data.data||r.data;A.value=e.flows||[]}catch(r){console.error("Failed to load flows:",r),A.value=[]}finally{R.value=!1}}function q(){C.value=null,i.value={name:"",description:"",trigger_keywords:"",initial_message:"Hi! Let me help you with that.",completion_message:"Thank you! We have all the information we need.",on_complete_action:"none",completion_config:{...O},enabled:!0,steps:[{...L,step_name:"step_1",step_order:1,message:"What is your name?",store_as:"name"}]},g.value=0,V.value=!0}async function X(r){try{const e=await U.getFlow(r.id),u=e.data.data||e.data;C.value=u,i.value={name:u.name||u.Name||"",description:u.description||u.Description||"",trigger_keywords:(u.trigger_keywords||u.TriggerKeywords||[]).join(", "),initial_message:u.initial_message||u.InitialMessage||"",completion_message:u.completion_message||u.CompletionMessage||"",on_complete_action:u.on_complete_action||u.OnCompleteAction||"none",completion_config:u.completion_config||u.CompletionConfig||{...O},enabled:u.is_enabled??u.IsEnabled??u.enabled??!0,steps:(u.steps||u.Steps||[]).map((t,m)=>({id:t.id||t.ID,step_name:t.step_name||t.StepName||`step_${m+1}`,step_order:t.step_order??t.StepOrder??m+1,message:t.message||t.Message||"",message_type:t.message_type||t.MessageType||"text",input_type:t.input_type||t.InputType||"text",input_config:t.input_config||t.InputConfig||{},api_config:t.api_config||t.ApiConfig||{...W},buttons:t.buttons||t.Buttons||[],validation_regex:t.validation_regex||t.ValidationRegex||"",validation_error:t.validation_error||t.ValidationError||"Invalid input. Please try again.",store_as:t.store_as||t.StoreAs||"",next_step:t.next_step||t.NextStep||"",retry_on_invalid:t.retry_on_invalid??t.RetryOnInvalid??!0,max_retries:t.max_retries??t.MaxRetries??3}))},g.value=i.value.steps.length>0?0:null,V.value=!0}catch{y.error("Failed to load flow details")}}function G(){const r=i.value.steps.length+1;i.value.steps.push({...L,step_name:`step_${r}`,step_order:r,message:"",store_as:""}),g.value=i.value.steps.length-1}function Y(r){i.value.steps.splice(r,1),i.value.steps.forEach((e,u)=>{e.step_order=u+1,e.step_name.startsWith("step_")&&(e.step_name=`step_${u+1}`)}),g.value===r?g.value=null:g.value!==null&&g.value>r&&g.value--}function H(r,e){const u=e==="up"?r-1:r+1;if(u<0||u>=i.value.steps.length)return;const t=i.value.steps,m=t[r];t[r]=t[u],t[u]=m,t.forEach((n,P)=>{n.step_order=P+1}),g.value===r?g.value=u:g.value===u&&(g.value=r)}async function ee(){if(!i.value.name.trim()){y.error("Please enter a flow name");return}if(i.value.steps.length===0){y.error("Please add at least one step");return}N.value=!0;try{const r={name:i.value.name,description:i.value.description,trigger_keywords:i.value.trigger_keywords.split(",").map(e=>e.trim()).filter(Boolean),initial_message:i.value.initial_message,completion_message:i.value.completion_message,on_complete_action:i.value.on_complete_action,completion_config:i.value.on_complete_action==="webhook"?i.value.completion_config:{},enabled:i.value.enabled,steps:i.value.steps.map((e,u)=>({...e,step_order:u+1,step_name:e.step_name||`step_${u+1}`}))};C.value?(await U.updateFlow(C.value.id,r),y.success("Flow updated")):(await U.createFlow(r),y.success("Flow created")),V.value=!1,await B()}catch{y.error("Failed to save flow")}finally{N.value=!1}}async function te(r){try{await U.updateFlow(r.id,{enabled:!r.enabled}),r.enabled=!r.enabled,y.success(r.enabled?"Flow enabled":"Flow disabled")}catch{y.error("Failed to toggle flow")}}async function oe(r){if(confirm(`Are you sure you want to delete "${r.name}"?`))try{await U.deleteFlow(r.id),y.success("Flow deleted"),await B()}catch{y.error("Failed to delete flow")}}const le=[{value:"none",label:"No input required"},{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"email",label:"Email"},{value:"phone",label:"Phone number"},{value:"date",label:"Date"},{value:"select",label:"Selection (buttons)"}],se=[{value:"text",label:"Static Text"},{value:"buttons",label:"Text with Buttons"},{value:"api_fetch",label:"Fetch from API"}],K=["GET","POST","PUT","PATCH"];function ae(r){if(r.buttons.length>=10){y.error("WhatsApp allows maximum 10 options");return}r.buttons.push({id:`btn_${r.buttons.length+1}`,title:""})}function ne(r,e){r.buttons.splice(e,1)}return(r,e)=>{const u=re("RouterLink");return p(),_("div",Se,[s("header",Pe,[s("div",Ie,[s("div",Te,[l(u,{to:"/chatbot"},{default:a(()=>[l(o(v),{variant:"ghost",size:"icon"},{default:a(()=>[l(o(we),{class:"h-5 w-5"})]),_:1})]),_:1}),e[11]||(e[11]=s("div",null,[s("h1",{class:"text-xl font-semibold"},"Conversation Flows"),s("p",{class:"text-sm text-muted-foreground"},"Design multi-step conversation experiences")],-1))]),l(o(fe),{open:V.value,"onUpdate:open":e[10]||(e[10]=t=>V.value=t)},{default:a(()=>[l(o(xe),{"as-child":""},{default:a(()=>[l(o(v),{onClick:q},{default:a(()=>[l(o(T),{class:"h-4 w-4 mr-2"}),e[12]||(e[12]=d(" Create Flow ",-1))]),_:1})]),_:1}),l(o(ge),{class:"max-w-4xl max-h-[90vh] flex flex-col"},{default:a(()=>[l(o(ve),{class:"flex-shrink-0"},{default:a(()=>[l(o(be),null,{default:a(()=>[d(f(C.value?"Edit":"Create")+" Conversation Flow",1)]),_:1}),l(o(ye),null,{default:a(()=>[...e[13]||(e[13]=[d(" Design a multi-step conversation to collect information from users. ",-1)])]),_:1})]),_:1}),s("div",Ae,[s("div",Me,[s("div",De,[s("div",Ne,[s("div",Oe,[l(o(c),{for:"name"},{default:a(()=>[...e[14]||(e[14]=[d("Flow Name *",-1)])]),_:1}),l(o(b),{id:"name",modelValue:i.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.name=t),placeholder:"Customer Support Flow"},null,8,["modelValue"])]),s("div",Be,[l(o(c),{for:"trigger_keywords"},{default:a(()=>[...e[15]||(e[15]=[d("Trigger Keywords (comma-separated)",-1)])]),_:1}),l(o(b),{id:"trigger_keywords",modelValue:i.value.trigger_keywords,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.trigger_keywords=t),placeholder:"help, support, order"},null,8,["modelValue"])])]),s("div",ze,[l(o(c),{for:"description"},{default:a(()=>[...e[16]||(e[16]=[d("Description",-1)])]),_:1}),l(o(b),{id:"description",modelValue:i.value.description,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.description=t),placeholder:"Handles customer support requests"},null,8,["modelValue"])]),s("div",Ee,[s("div",je,[l(o(c),{for:"initial_message"},{default:a(()=>[...e[17]||(e[17]=[d("Initial Message",-1)])]),_:1}),l(o(F),{id:"initial_message",modelValue:i.value.initial_message,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.initial_message=t),placeholder:"Hi! Let me help you with that.",rows:2},null,8,["modelValue"])]),s("div",Re,[l(o(c),{for:"completion_message"},{default:a(()=>[...e[18]||(e[18]=[d("Completion Message",-1)])]),_:1}),l(o(F),{id:"completion_message",modelValue:i.value.completion_message,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.completion_message=t),placeholder:"Thank you! We'll get back to you soon.",rows:2},null,8,["modelValue"])])]),s("div",We,[s("div",Le,[l(o(c),null,{default:a(()=>[...e[19]||(e[19]=[d("On Flow Completion",-1)])]),_:1}),$(s("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.on_complete_action=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[20]||(e[20]=[s("option",{value:"none"},"No action",-1),s("option",{value:"webhook"},"Send data to API/Webhook",-1)])],512),[[I,i.value.on_complete_action]])]),i.value.on_complete_action==="webhook"?(p(),_("div",qe,[s("div",Ge,[l(o(S),{variant:"outline"},{default:a(()=>[...e[21]||(e[21]=[d("Webhook Configuration",-1)])]),_:1})]),s("div",He,[s("div",Ke,[l(o(c),null,{default:a(()=>[...e[22]||(e[22]=[d("Method",-1)])]),_:1}),$(s("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.completion_config.method=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[(p(),_(x,null,w(K,t=>s("option",{key:t,value:t},f(t),9,Je)),64))],512),[[I,i.value.completion_config.method]])]),s("div",Qe,[l(o(c),null,{default:a(()=>[...e[23]||(e[23]=[d("Webhook URL *",-1)])]),_:1}),l(o(b),{modelValue:i.value.completion_config.url,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value.completion_config.url=t),placeholder:"https://api.example.com/webhook"},null,8,["modelValue"])])]),s("div",Ze,[l(o(c),null,{default:a(()=>[...e[24]||(e[24]=[d("Custom Request Body (optional)",-1)])]),_:1}),l(o(F),{modelValue:i.value.completion_config.body,"onUpdate:modelValue":e[8]||(e[8]=t=>i.value.completion_config.body=t),placeholder:'Leave empty for default payload, or enter custom JSON like: {"name": "{{name}}", "phone": "{{phone_number}}"}',rows:3},null,8,["modelValue"]),e[25]||(e[25]=s("p",{class:"text-xs text-muted-foreground"}," Default payload includes: flow_id, flow_name, session_id, phone_number, contact_id, contact_name, session_data, completed_at ",-1))])])):h("",!0)])]),s("div",Xe,[s("div",Ye,[l(o(c),{class:"text-base font-medium"},{default:a(()=>[...e[26]||(e[26]=[d("Flow Steps",-1)])]),_:1}),l(o(v),{variant:"outline",size:"sm",onClick:G},{default:a(()=>[l(o(T),{class:"h-4 w-4 mr-1"}),e[27]||(e[27]=d(" Add Step ",-1))]),_:1})]),i.value.steps.length===0?(p(),_("div",et,[e[29]||(e[29]=s("p",{class:"text-muted-foreground mb-2"},"No steps yet",-1)),l(o(v),{variant:"outline",size:"sm",onClick:G},{default:a(()=>[l(o(T),{class:"h-4 w-4 mr-1"}),e[28]||(e[28]=d(" Add First Step ",-1))]),_:1})])):(p(),_("div",tt,[(p(!0),_(x,null,w(i.value.steps,(t,m)=>(p(),_("div",{key:m,class:"border rounded-lg"},[s("div",{class:"flex items-center gap-2 p-3 cursor-pointer hover:bg-muted/50",onClick:n=>g.value=g.value===m?null:m},[l(o(Fe),{class:"h-4 w-4 text-muted-foreground"}),l(o(S),{variant:"outline",class:"font-mono"},{default:a(()=>[d(f(m+1),1)]),_:2},1024),s("span",lt,f(t.step_name||`Step ${m+1}`),1),s("span",st,f(t.message||"No message"),1),s("div",at,[l(o(v),{variant:"ghost",size:"icon",class:"h-7 w-7",disabled:m===0,onClick:z(n=>H(m,"up"),["stop"])},{default:a(()=>[l(o($e),{class:"h-4 w-4"})]),_:1},8,["disabled","onClick"]),l(o(v),{variant:"ghost",size:"icon",class:"h-7 w-7",disabled:m===i.value.steps.length-1,onClick:z(n=>H(m,"down"),["stop"])},{default:a(()=>[l(o(Ue),{class:"h-4 w-4"})]),_:1},8,["disabled","onClick"]),l(o(v),{variant:"ghost",size:"icon",class:"h-7 w-7 text-destructive",onClick:z(n=>Y(m),["stop"])},{default:a(()=>[l(o(E),{class:"h-4 w-4"})]),_:1},8,["onClick"])])],8,ot),g.value===m?(p(),_("div",nt,[s("div",it,[s("div",dt,[l(o(c),null,{default:a(()=>[...e[30]||(e[30]=[d("Step Name",-1)])]),_:1}),l(o(b),{modelValue:t.step_name,"onUpdate:modelValue":n=>t.step_name=n,placeholder:"step_1"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",rt,[l(o(c),null,{default:a(()=>[...e[31]||(e[31]=[d("Store Response As",-1)])]),_:1}),l(o(b),{modelValue:t.store_as,"onUpdate:modelValue":n=>t.store_as=n,placeholder:"customer_name"},null,8,["modelValue","onUpdate:modelValue"]),e[32]||(e[32]=s("p",{class:"text-xs text-muted-foreground"},"Variable name to store the user's response",-1))])]),s("div",ut,[l(o(c),null,{default:a(()=>[...e[33]||(e[33]=[d("Message Source",-1)])]),_:1}),$(s("select",{"onUpdate:modelValue":n=>t.message_type=n,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[(p(),_(x,null,w(se,n=>s("option",{key:n.value,value:n.value},f(n.label),9,ct)),64))],8,pt),[[I,t.message_type]])]),t.message_type!=="api_fetch"?(p(),_("div",mt,[l(o(c),null,{default:a(()=>[...e[34]||(e[34]=[d("Message to Send *",-1)])]),_:1}),l(o(F),{modelValue:t.message,"onUpdate:modelValue":n=>t.message=n,placeholder:"What is your name?",rows:2},null,8,["modelValue","onUpdate:modelValue"])])):h("",!0),t.message_type==="buttons"?(p(),_("div",_t,[s("div",ft,[s("div",gt,[l(o(S),{variant:"outline"},{default:a(()=>[...e[35]||(e[35]=[d("Button Options",-1)])]),_:1}),s("span",vt," ("+f(t.buttons.length)+"/10) "+f(t.buttons.length<=3?"- Shows as buttons":"- Shows as list"),1)]),l(o(v),{variant:"outline",size:"sm",onClick:n=>ae(t),disabled:t.buttons.length>=10},{default:a(()=>[l(o(T),{class:"h-4 w-4 mr-1"}),e[36]||(e[36]=d(" Add Option ",-1))]),_:1},8,["onClick","disabled"])]),t.buttons.length===0?(p(),_("div",bt,' No buttons added yet. Click "Add Option" to add buttons. ')):(p(),_("div",yt,[(p(!0),_(x,null,w(t.buttons,(n,P)=>(p(),_("div",{key:P,class:"flex items-center gap-2"},[l(o(b),{modelValue:n.id,"onUpdate:modelValue":M=>n.id=M,placeholder:"btn_id",class:"w-24"},null,8,["modelValue","onUpdate:modelValue"]),l(o(b),{modelValue:n.title,"onUpdate:modelValue":M=>n.title=M,placeholder:`Option ${P+1}`,class:"flex-1",maxlength:t.buttons.length<=3?20:24},null,8,["modelValue","onUpdate:modelValue","placeholder","maxlength"]),l(o(v),{variant:"ghost",size:"icon",class:"h-8 w-8 text-destructive",onClick:M=>ne(t,P)},{default:a(()=>[l(o(E),{class:"h-4 w-4"})]),_:1},8,["onClick"])]))),128))])),e[37]||(e[37]=s("p",{class:"text-xs text-muted-foreground"}," Button titles: max 20 chars (buttons) or 24 chars (list). IDs are used for conditional routing. ",-1))])):h("",!0),t.message_type==="api_fetch"?(p(),_("div",ht,[s("div",xt,[l(o(S),{variant:"outline"},{default:a(()=>[...e[38]||(e[38]=[d("API Configuration",-1)])]),_:1})]),s("div",wt,[s("div",kt,[l(o(c),null,{default:a(()=>[...e[39]||(e[39]=[d("Method",-1)])]),_:1}),$(s("select",{"onUpdate:modelValue":n=>t.api_config.method=n,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[(p(),_(x,null,w(K,n=>s("option",{key:n,value:n},f(n),9,Ct)),64))],8,Vt),[[I,t.api_config.method]])]),s("div",Ut,[l(o(c),null,{default:a(()=>[...e[40]||(e[40]=[d("API URL *",-1)])]),_:1}),l(o(b),{modelValue:t.api_config.url,"onUpdate:modelValue":n=>t.api_config.url=n,placeholder:"https://api.example.com/data/{{customer_id}}"},null,8,["modelValue","onUpdate:modelValue"]),s("p",$t,"Use "+f(r.variable)+" to include session data",1)])]),t.api_config.method!=="GET"?(p(),_("div",Ft,[l(o(c),null,{default:a(()=>[...e[41]||(e[41]=[d("Request Body (JSON)",-1)])]),_:1}),l(o(F),{modelValue:t.api_config.body,"onUpdate:modelValue":n=>t.api_config.body=n,placeholder:'{"customer_id": "{{customer_id}}", "name": "{{name}}"}',rows:3},null,8,["modelValue","onUpdate:modelValue"])])):h("",!0),s("div",St,[s("div",Pt,[l(o(c),null,{default:a(()=>[...e[42]||(e[42]=[d("Response Path",-1)])]),_:1}),l(o(b),{modelValue:t.api_config.response_path,"onUpdate:modelValue":n=>t.api_config.response_path=n,placeholder:"data.message"},null,8,["modelValue","onUpdate:modelValue"]),e[43]||(e[43]=s("p",{class:"text-xs text-muted-foreground"},"Dot notation path to extract message (e.g., data.message)",-1))]),s("div",It,[l(o(c),null,{default:a(()=>[...e[44]||(e[44]=[d("Fallback Message",-1)])]),_:1}),l(o(b),{modelValue:t.api_config.fallback_message,"onUpdate:modelValue":n=>t.api_config.fallback_message=n,placeholder:"Sorry, we couldn't fetch your data."},null,8,["modelValue","onUpdate:modelValue"]),e[45]||(e[45]=s("p",{class:"text-xs text-muted-foreground"},"Sent if API call fails",-1))])])])):h("",!0),s("div",Tt,[s("div",At,[l(o(c),null,{default:a(()=>[...e[46]||(e[46]=[d("Expected Input Type",-1)])]),_:1}),$(s("select",{"onUpdate:modelValue":n=>t.input_type=n,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[(p(),_(x,null,w(le,n=>s("option",{key:n.value,value:n.value},f(n.label),9,Dt)),64))],8,Mt),[[I,t.input_type]])]),s("div",Nt,[l(o(c),null,{default:a(()=>[...e[47]||(e[47]=[d("Validation Regex (optional)",-1)])]),_:1}),l(o(b),{modelValue:t.validation_regex,"onUpdate:modelValue":n=>t.validation_regex=n,placeholder:"^[A-Za-z ]+$"},null,8,["modelValue","onUpdate:modelValue"])])]),t.input_type==="select"?(p(),_("div",Ot,[l(o(c),null,{default:a(()=>[...e[48]||(e[48]=[d("Button Options (one per line)",-1)])]),_:1}),l(o(F),{"model-value":(t.input_config.options||[]).join(`
`),"onUpdate:modelValue":n=>t.input_config={...t.input_config,options:n.split(`
`).filter(Boolean)},placeholder:`Option 1
Option 2
Option 3`,rows:3},null,8,["model-value","onUpdate:modelValue"])])):h("",!0),s("div",Bt,[l(o(c),null,{default:a(()=>[...e[49]||(e[49]=[d("Validation Error Message",-1)])]),_:1}),l(o(b),{modelValue:t.validation_error,"onUpdate:modelValue":n=>t.validation_error=n,placeholder:"Invalid input. Please try again."},null,8,["modelValue","onUpdate:modelValue"])]),s("div",zt,[s("div",Et,[$(s("input",{id:`retry-${m}`,type:"checkbox","onUpdate:modelValue":n=>t.retry_on_invalid=n,class:"h-4 w-4 rounded border-gray-300"},null,8,jt),[[ue,t.retry_on_invalid]]),l(o(c),{for:`retry-${m}`},{default:a(()=>[...e[50]||(e[50]=[d("Retry on invalid input",-1)])]),_:1},8,["for"])]),t.retry_on_invalid?(p(),_("div",Rt,[l(o(c),null,{default:a(()=>[...e[51]||(e[51]=[d("Max retries:",-1)])]),_:1}),l(o(b),{modelValue:t.max_retries,"onUpdate:modelValue":n=>t.max_retries=n,modelModifiers:{number:!0},type:"number",min:"1",max:"10",class:"w-20"},null,8,["modelValue","onUpdate:modelValue"])])):h("",!0)])])):h("",!0)]))),128))]))])])]),l(o(he),{class:"flex-shrink-0 border-t pt-4"},{default:a(()=>[l(o(v),{variant:"outline",onClick:e[9]||(e[9]=t=>V.value=!1)},{default:a(()=>[...e[52]||(e[52]=[d("Cancel",-1)])]),_:1}),l(o(v),{onClick:ee,disabled:N.value},{default:a(()=>[d(f(C.value?"Update":"Create")+" Flow ",1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])]),l(o(_e),{class:"flex-1"},{default:a(()=>[s("div",Wt,[(p(!0),_(x,null,w(A.value,t=>(p(),D(o(Q),{key:t.id,class:"flex flex-col"},{default:a(()=>[l(o(ce),null,{default:a(()=>[s("div",Lt,[s("div",qt,[s("div",Gt,[l(o(Z),{class:"h-5 w-5 text-purple-600 dark:text-purple-400"})]),s("div",null,[l(o(me),{class:"text-base"},{default:a(()=>[d(f(t.name),1)]),_:2},1024),l(o(S),{variant:t.enabled?"default":"secondary",class:"mt-1"},{default:a(()=>[d(f(t.enabled?"Active":"Inactive"),1)]),_:2},1032,["variant"])])])])]),_:2},1024),l(o(J),{class:"flex-1"},{default:a(()=>{var m;return[s("p",Ht,f(t.description||"No description"),1),(m=t.trigger_keywords)!=null&&m.length?(p(),_("div",Kt,[(p(!0),_(x,null,w(t.trigger_keywords,n=>(p(),D(o(S),{key:n,variant:"outline"},{default:a(()=>[d(f(n),1)]),_:2},1024))),128))])):h("",!0),s("p",Jt,f(t.steps_count)+" steps",1)]}),_:2},1024),s("div",Qt,[s("div",Zt,[l(o(v),{variant:"ghost",size:"icon",onClick:m=>X(t)},{default:a(()=>[l(o(ke),{class:"h-4 w-4"})]),_:1},8,["onClick"]),l(o(v),{variant:"ghost",size:"icon",onClick:m=>oe(t)},{default:a(()=>[l(o(E),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"])]),l(o(v),{variant:t.enabled?"outline":"default",size:"sm",onClick:m=>te(t)},{default:a(()=>[(p(),D(pe(t.enabled?o(Ve):o(Ce)),{class:"h-4 w-4 mr-1"})),d(" "+f(t.enabled?"Disable":"Enable"),1)]),_:2},1032,["variant","onClick"])])]),_:2},1024))),128)),A.value.length===0?(p(),D(o(Q),{key:0,class:"col-span-full"},{default:a(()=>[l(o(J),{class:"py-12 text-center text-muted-foreground"},{default:a(()=>[l(o(Z),{class:"h-12 w-12 mx-auto mb-4 opacity-50"}),e[54]||(e[54]=s("p",{class:"text-lg font-medium"},"No conversation flows yet",-1)),e[55]||(e[55]=s("p",{class:"text-sm mb-4"},"Create your first flow to automate conversations.",-1)),l(o(v),{onClick:q},{default:a(()=>[l(o(T),{class:"h-4 w-4 mr-2"}),e[53]||(e[53]=d(" Create Flow ",-1))]),_:1})]),_:1})]),_:1})):h("",!0)])]),_:1})])}}});export{vo as default};
