import{a as h,_ as b}from"./CardContent.vue_vue_type_script_setup_true_lang-BVSlREZs.js";import{_ as E,a as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-C5-EVre-.js";import{_ as u}from"./Button.vue_vue_type_script_setup_true_lang-CdpToHaS.js";import{_ as y}from"./Badge.vue_vue_type_script_setup_true_lang-lXziiQoX.js";import{_ as B}from"./ScrollArea.vue_vue_type_script_setup_true_lang-BYu-HJVo.js";import{d as O,r as k,x as T,L as g,c as v,h as s,a as t,w as r,b as e,i as n,k as d,l as x,F,s as C,v as m,K as _,o as l}from"./index-CYNh7eqI.js";import{P as S,a as I,T as V}from"./trash-2-ExN6Amm1.js";import{W as D}from"./workflow-Ckj7YDG5.js";import{E as W}from"./external-link-DzkkjUHP.js";import{P as N}from"./play-Dq87bFQT.js";import"./createLucideIcon-CJWRy_ZI.js";const R={class:"flex flex-col h-full"},j={class:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"},z={class:"flex h-16 items-center justify-between px-6"},U={class:"p-6 grid gap-4 md:grid-cols-2 lg:grid-cols-3"},H={class:"flex items-start justify-between"},K={class:"flex items-center gap-3"},G={class:"h-10 w-10 rounded-lg bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center"},M={class:"text-xs text-muted-foreground font-mono"},Y={class:"flex flex-wrap gap-2 mb-3"},q={class:"px-6 pb-4 flex items-center justify-between border-t pt-4"},J={class:"flex gap-2"},Q={class:"flex gap-2"},de=O({__name:"FlowsView",setup(X){const c=k([]),p=k(!0);T(async()=>{await w()});async function w(){p.value=!0;try{const i=await g.list();c.value=i.data.flows||[]}catch{c.value=[{id:"1",name:"Customer Feedback Survey",flow_id:"FLOW_123456",status:"PUBLISHED",categories:["SURVEY"],preview_url:"https://wa.me/...",created_at:new Date().toISOString()},{id:"2",name:"Product Catalog",flow_id:"FLOW_789012",status:"DRAFT",categories:["CATALOG"],created_at:new Date().toISOString()},{id:"3",name:"Appointment Booking",flow_id:"FLOW_345678",status:"PUBLISHED",categories:["BOOKING"],preview_url:"https://wa.me/...",created_at:new Date().toISOString()}]}finally{p.value=!1}}async function P(i){try{await g.publish(i.id),_.success("Flow published successfully"),await w()}catch{_.error("Failed to publish flow")}}async function L(i){if(confirm(`Are you sure you want to delete "${i.name}"?`))try{await g.delete(i.id),_.success("Flow deleted"),await w()}catch{_.error("Failed to delete flow")}}function A(i){switch(i){case"PUBLISHED":return"default";case"DRAFT":return"secondary";case"DEPRECATED":return"destructive";default:return"outline"}}return(i,a)=>(l(),v("div",R,[s("header",j,[s("div",z,[a[1]||(a[1]=s("div",null,[s("h1",{class:"text-xl font-semibold"},"WhatsApp Flows"),s("p",{class:"text-sm text-muted-foreground"},"Create interactive flows for your customers")],-1)),t(e(u),null,{default:r(()=>[t(e(S),{class:"h-4 w-4 mr-2"}),a[0]||(a[0]=n(" Create Flow ",-1))]),_:1})])]),t(e(B),{class:"flex-1"},{default:r(()=>[s("div",U,[(l(!0),v(F,null,C(c.value,o=>(l(),d(e(b),{key:o.id},{default:r(()=>[t(e(E),null,{default:r(()=>[s("div",H,[s("div",K,[s("div",G,[t(e(D),{class:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})]),s("div",null,[t(e($),{class:"text-base"},{default:r(()=>[n(m(o.name),1)]),_:2},1024),s("p",M,m(o.flow_id),1)])])])]),_:2},1024),t(e(h),null,{default:r(()=>[s("div",Y,[t(e(y),{variant:A(o.status)},{default:r(()=>[n(m(o.status),1)]),_:2},1032,["variant"]),(l(!0),v(F,null,C(o.categories,f=>(l(),d(e(y),{key:f,variant:"outline"},{default:r(()=>[n(m(f),1)]),_:2},1024))),128))])]),_:2},1024),s("div",q,[s("div",J,[t(e(u),{variant:"ghost",size:"icon"},{default:r(()=>[t(e(I),{class:"h-4 w-4"})]),_:1}),t(e(u),{variant:"ghost",size:"icon",onClick:f=>L(o)},{default:r(()=>[t(e(V),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"])]),s("div",Q,[o.preview_url?(l(),d(e(u),{key:0,variant:"outline",size:"sm",as:"a",href:o.preview_url,target:"_blank"},{default:r(()=>[t(e(W),{class:"h-4 w-4 mr-1"}),a[2]||(a[2]=n(" Preview ",-1))]),_:1},8,["href"])):x("",!0),o.status==="DRAFT"?(l(),d(e(u),{key:1,size:"sm",onClick:f=>P(o)},{default:r(()=>[t(e(N),{class:"h-4 w-4 mr-1"}),a[3]||(a[3]=n(" Publish ",-1))]),_:1},8,["onClick"])):x("",!0)])])]),_:2},1024))),128)),c.value.length===0&&!p.value?(l(),d(e(b),{key:0,class:"col-span-full"},{default:r(()=>[t(e(h),{class:"py-12 text-center text-muted-foreground"},{default:r(()=>[t(e(D),{class:"h-12 w-12 mx-auto mb-4 opacity-50"}),a[5]||(a[5]=s("p",{class:"text-lg font-medium"},"No WhatsApp Flows yet",-1)),a[6]||(a[6]=s("p",{class:"text-sm mb-4"},"Create interactive flows to engage your customers.",-1)),t(e(u),null,{default:r(()=>[t(e(S),{class:"h-4 w-4 mr-2"}),a[4]||(a[4]=n(" Create Flow ",-1))]),_:1})]),_:1})]),_:1})):x("",!0)])]),_:1})]))}});export{de as default};
