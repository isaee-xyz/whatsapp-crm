import{d as Ue,r as x,x as Ie,H as V,K as y,p as j,c as i,h as a,k as _,a as l,w as n,b as s,I as N,J as P,F as k,s as w,i as c,l as f,v as p,t as le,n as z,o as u}from"./index-CYNh7eqI.js";import{_ as oe,a as ne}from"./CardContent.vue_vue_type_script_setup_true_lang-BVSlREZs.js";import{_ as $e,a as Ae}from"./CardTitle.vue_vue_type_script_setup_true_lang-C5-EVre-.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-CdpToHaS.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-c8YZDCZO.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-BiSM-I6O.js";import{_ as Ne}from"./ScrollArea.vue_vue_type_script_setup_true_lang-BYu-HJVo.js";import{_ as Pe}from"./Textarea.vue_vue_type_script_setup_true_lang-qPA_yzOk.js";import{_ as G}from"./Separator.vue_vue_type_script_setup_true_lang-D6eY7m55.js";import{_ as ue,a as re,b as de,c as ie,d as ce,e as pe,X as Me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BYVwNXX_.js";import{S as Le}from"./search-C4qlZP-j.js";import{L}from"./loader-2-D9Xdgoi3.js";import{R as me}from"./refresh-cw-WJmzgc2f.js";import{P as q,a as Se,T as De}from"./trash-2-ExN6Amm1.js";import{F as Re}from"./file-text-BmYyHgjR.js";import{A as Oe}from"./alert-circle-D--r4mDh.js";import{S as K}from"./send-BPuayp4C.js";import{M as Be}from"./message-square-DMmm80JC.js";import{a as ve}from"./createLucideIcon-CJWRy_ZI.js";import{V as Fe}from"./video-BEctA8Cc.js";import{E as He}from"./eye-DLTt0OG_.js";/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=ve("FileIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=ve("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Ge={class:"flex flex-col h-full"},qe={class:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"},Ke={class:"flex h-16 items-center justify-between px-6"},Je={class:"flex items-center gap-2"},Ye={class:"p-4 border-b flex items-center gap-4 flex-wrap"},We={class:"flex items-center gap-2"},Xe=["value"],Qe={class:"relative flex-1 max-w-md"},Ze={key:0,class:"flex-1 flex items-center justify-center"},et={class:"p-6 grid gap-4 md:grid-cols-2 lg:grid-cols-3"},tt={class:"flex items-start justify-between"},at={class:"flex-1 min-w-0"},st={class:"text-xs font-mono text-muted-foreground truncate mt-1"},lt={class:"flex items-center gap-2 mt-2 flex-wrap"},ot={class:"text-xs text-muted-foreground"},nt={class:"text-sm text-muted-foreground line-clamp-3"},ut={key:0,class:"mt-2 text-xs text-muted-foreground italic"},rt={class:"px-6 pb-4 flex items-center gap-1 border-t pt-3"},dt={class:"flex items-center justify-center gap-2"},it={class:"space-y-4 py-4"},ct={class:"space-y-2"},pt=["disabled"],mt=["value"],vt={class:"grid grid-cols-2 gap-4"},ft={class:"space-y-2"},gt={class:"space-y-2"},yt={class:"grid grid-cols-2 gap-4"},_t={class:"space-y-2"},bt=["value"],xt={class:"space-y-2"},ht=["value"],kt={class:"space-y-2"},wt=["value"],Tt={key:0,class:"space-y-2"},Ct={class:"space-y-2"},Vt={class:"space-y-2"},Et={class:"space-y-3"},Ut={class:"flex items-center justify-between"},It={class:"flex items-center justify-between"},$t={class:"text-sm font-medium"},At={class:"grid grid-cols-2 gap-3"},Nt={class:"space-y-1"},Pt=["onUpdate:modelValue"],Mt=["value"],Lt={class:"space-y-1"},St={key:0,class:"space-y-1"},Dt={key:1,class:"space-y-1"},Rt={key:1,class:"space-y-3"},Ot={key:0,class:"space-y-2"},Bt={class:"text-sm font-mono bg-muted px-2 py-1 rounded min-w-[60px] text-center"},Ft=["value","onInput"],Ht={key:1,class:"space-y-2"},jt={class:"text-sm font-mono bg-muted px-2 py-1 rounded min-w-[60px] text-center"},zt=["value","onInput"],Gt={class:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},qt={class:"flex gap-3"},Kt={class:"text-sm text-blue-800 dark:text-blue-200"},Jt={class:"mt-1"},Yt={key:0,class:"py-4"},Wt={class:"bg-[#e5ddd5] dark:bg-gray-800 rounded-lg p-4"},Xt={class:"bg-white dark:bg-gray-700 rounded-lg shadow max-w-[280px] overflow-hidden"},Qt={key:0,class:"p-3 border-b"},Zt={key:0,class:"font-semibold"},ea={key:1,class:"h-32 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center"},ta={class:"p-3"},aa=["innerHTML"],sa={key:1,class:"px-3 pb-3"},la={class:"text-xs text-gray-500"},oa={key:2,class:"border-t"},na={class:"w-full py-2 text-sm text-blue-500 hover:bg-gray-50 dark:hover:bg-gray-600"},ua={class:"mt-4 space-y-2 text-sm"},ra={class:"flex justify-between"},da={class:"flex justify-between"},ia={class:"flex justify-between"},ca={key:0,class:"flex justify-between"},pa={class:"font-mono text-xs"},La=Ue({__name:"TemplatesView",setup(ma){const S=x([]),E=x([]),B=x(!0),D=x(!1),R=x(""),h=x(""),U=x(!1),O=x(!1),T=x(null),M=x(!1),m=x(null),d=x({whatsapp_account:"",name:"",display_name:"",language:"en",category:"UTILITY",header_type:"NONE",header_content:"",body_content:"",footer_content:"",buttons:[],sample_values:[]}),fe=[{code:"en",name:"English"},{code:"en_US",name:"English (US)"},{code:"en_GB",name:"English (UK)"},{code:"es",name:"Spanish"},{code:"pt_BR",name:"Portuguese (BR)"},{code:"hi",name:"Hindi"},{code:"ar",name:"Arabic"},{code:"fr",name:"French"},{code:"de",name:"German"}],ge=[{value:"UTILITY",label:"Utility",description:"Order updates, account alerts"},{value:"MARKETING",label:"Marketing",description:"Promotions, offers"},{value:"AUTHENTICATION",label:"Authentication",description:"OTP, verification codes"}],ye=[{value:"NONE",label:"None"},{value:"TEXT",label:"Text"},{value:"IMAGE",label:"Image"},{value:"VIDEO",label:"Video"},{value:"DOCUMENT",label:"Document"}];Ie(async()=>{await Promise.all([_e(),I()])});async function _e(){var o;try{const e=await V.get("/accounts");E.value=((o=e.data.data)==null?void 0:o.accounts)||[],E.value.length>0&&!h.value&&(h.value=E.value[0].name)}catch(e){console.error("Failed to fetch accounts:",e)}}async function I(){var o;B.value=!0;try{const e=h.value?`?account=${h.value}`:"",t=await V.get(`/templates${e}`);S.value=((o=t.data.data)==null?void 0:o.templates)||[]}catch(e){console.error("Failed to fetch templates:",e),y.error("Failed to load templates"),S.value=[]}finally{B.value=!1}}async function J(){var o,e;if(!h.value){y.error("Please select a WhatsApp account first");return}D.value=!0;try{const t=await V.post("/templates/sync",{whatsapp_account:h.value});y.success(t.data.data.message||"Templates synced successfully"),await I()}catch(t){const r=((e=(o=t.response)==null?void 0:o.data)==null?void 0:e.message)||"Failed to sync templates";y.error(r)}finally{D.value=!1}}function Y(){var o;T.value=null,d.value={whatsapp_account:h.value||((o=E.value[0])==null?void 0:o.name)||"",name:"",display_name:"",language:"en",category:"UTILITY",header_type:"NONE",header_content:"",body_content:"",footer_content:"",buttons:[],sample_values:[]},U.value=!0}function be(o){T.value=o,d.value={whatsapp_account:o.whatsapp_account,name:o.name,display_name:o.display_name,language:o.language,category:o.category,header_type:o.header_type||"NONE",header_content:o.header_content||"",body_content:o.body_content,footer_content:o.footer_content||"",buttons:o.buttons||[],sample_values:o.sample_values||[]},U.value=!0}function xe(o){m.value=o,M.value=!0}async function he(){var o,e;if(!d.value.name.trim()||!d.value.body_content.trim()){y.error("Template name and body content are required");return}if(!d.value.whatsapp_account){y.error("Please select a WhatsApp account");return}O.value=!0;try{console.log("Saving template with data:",JSON.stringify(d.value,null,2)),T.value?(await V.put(`/templates/${T.value.id}`,d.value),y.success("Template updated successfully")):(await V.post("/templates",d.value),y.success("Template created successfully")),U.value=!1,await I()}catch(t){const r=((e=(o=t.response)==null?void 0:o.data)==null?void 0:e.message)||"Failed to save template";y.error(r)}finally{O.value=!1}}async function ke(o){var e,t;if(confirm(`Are you sure you want to delete "${o.display_name||o.name}"?`))try{await V.delete(`/templates/${o.id}`),y.success("Template deleted"),await I()}catch(r){const v=((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to delete template";y.error(v)}}const $=x(null);async function W(o){var e,t,r;if(confirm(`Publish "${o.display_name||o.name}" to Meta for approval?`)){$.value=o.id;try{const v=await V.post(`/templates/${o.id}/publish`);y.success(((e=v.data.data)==null?void 0:e.message)||"Template submitted to Meta for approval"),await I()}catch(v){const A=((r=(t=v.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to publish template";y.error(A,{duration:8e3})}finally{$.value=null}}}function X(o){switch(o){case"APPROVED":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"PENDING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"REJECTED":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"DRAFT":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}}function we(o){switch(o){case"UTILITY":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"MARKETING":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"AUTHENTICATION":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}}function Q(o){switch(o){case"IMAGE":return ze;case"VIDEO":return Fe;case"DOCUMENT":return je;default:return Be}}const Z=j(()=>{if(!R.value)return S.value;const o=R.value.toLowerCase();return S.value.filter(e=>{var t;return e.name.toLowerCase().includes(o)||((t=e.display_name)==null?void 0:t.toLowerCase().includes(o))||e.body_content.toLowerCase().includes(o)})}),F=j(()=>{const o=d.value.body_content.match(/\{\{(\d+)\}\}/g)||[];return[...new Set(o)].map(t=>parseInt(t.replace(/\{\{|\}\}/g,""))).sort((t,r)=>t-r)}),H=j(()=>{if(d.value.header_type!=="TEXT")return[];const o=d.value.header_content.match(/\{\{(\d+)\}\}/g)||[];return[...new Set(o)].map(t=>parseInt(t.replace(/\{\{|\}\}/g,""))).sort((t,r)=>t-r)}),Te=[{value:"QUICK_REPLY",label:"Quick Reply",description:"Simple reply button"},{value:"URL",label:"URL",description:"Opens a website"},{value:"PHONE_NUMBER",label:"Phone Number",description:"Calls a number"}];function Ce(){if(d.value.buttons.length>=3){y.error("Maximum 3 buttons allowed");return}d.value.buttons.push({type:"QUICK_REPLY",text:""})}function Ve(o){d.value.buttons.splice(o,1)}function ee(o,e){const t=d.value.sample_values.find(r=>r.component===o&&r.index===e);return(t==null?void 0:t.value)||""}function te(o,e,t){const r=d.value.sample_values.findIndex(v=>v.component===o&&v.index===e);r>=0?d.value.sample_values[r].value=t:d.value.sample_values.push({component:o,index:e,value:t})}function ae(o){return`{{${o}}}`}function Ee(o,e){let t=o;return e.forEach((r,v)=>{t=t.replace(`{{${v+1}}}`,`<span class="bg-green-100 dark:bg-green-900 px-1 rounded">${r}</span>`)}),t=t.replace(/\{\{(\d+)\}\}/g,'<span class="bg-yellow-100 dark:bg-yellow-900 px-1 rounded">{{$1}}</span>'),t}return(o,e)=>(u(),i("div",Ge,[a("header",qe,[a("div",Ke,[e[18]||(e[18]=a("div",null,[a("h1",{class:"text-xl font-semibold"},"Message Templates"),a("p",{class:"text-sm text-muted-foreground"},"Create and manage WhatsApp message templates")],-1)),a("div",Je,[l(s(b),{variant:"outline",onClick:J,disabled:D.value||!h.value},{default:n(()=>[D.value?(u(),_(s(L),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):(u(),_(s(me),{key:1,class:"h-4 w-4 mr-2"})),e[16]||(e[16]=c(" Sync from Meta ",-1))]),_:1},8,["disabled"]),l(s(b),{onClick:Y},{default:n(()=>[l(s(q),{class:"h-4 w-4 mr-2"}),e[17]||(e[17]=c(" Create Template ",-1))]),_:1})])])]),a("div",Ye,[a("div",We,[l(s(g),{class:"text-sm text-muted-foreground"},{default:n(()=>[...e[19]||(e[19]=[c("Account:",-1)])]),_:1}),N(a("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>h.value=t),onChange:I,class:"h-9 rounded-md border bg-background px-3 text-sm"},[e[20]||(e[20]=a("option",{value:""},"All Accounts",-1)),(u(!0),i(k,null,w(E.value,t=>(u(),i("option",{key:t.id,value:t.name},p(t.name),9,Xe))),128))],544),[[P,h.value]])]),a("div",Qe,[l(s(Le),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l(s(C),{modelValue:R.value,"onUpdate:modelValue":e[1]||(e[1]=t=>R.value=t),placeholder:"Search templates...",class:"pl-9"},null,8,["modelValue"])])]),B.value?(u(),i("div",Ze,[l(s(L),{class:"h-8 w-8 animate-spin text-muted-foreground"})])):(u(),_(s(Ne),{key:1,class:"flex-1"},{default:n(()=>[a("div",et,[(u(!0),i(k,null,w(Z.value,t=>(u(),_(s(oe),{key:t.id,class:"flex flex-col"},{default:n(()=>[l(s($e),{class:"pb-3"},{default:n(()=>[a("div",tt,[a("div",at,[l(s(Ae),{class:"text-base truncate"},{default:n(()=>[c(p(t.display_name||t.name),1)]),_:2},1024),a("p",st,p(t.name),1),a("div",lt,[a("span",{class:z(["px-2 py-0.5 rounded text-xs font-medium",we(t.category)])},p(t.category),3),a("span",{class:z(["px-2 py-0.5 rounded text-xs font-medium",X(t.status)])},p(t.status),3),a("span",ot,p(t.language),1)])]),(u(),_(le(Q(t.header_type)),{class:"h-5 w-5 text-muted-foreground flex-shrink-0"}))])]),_:2},1024),l(s(ne),{class:"flex-1"},{default:n(()=>[a("p",nt,p(t.body_content),1),t.footer_content?(u(),i("div",ut,p(t.footer_content),1)):f("",!0)]),_:2},1024),a("div",rt,[l(s(b),{variant:"ghost",size:"sm",onClick:r=>xe(t),title:"Preview"},{default:n(()=>[l(s(He),{class:"h-4 w-4"})]),_:1},8,["onClick"]),l(s(b),{variant:"ghost",size:"sm",onClick:r=>be(t),disabled:t.status==="APPROVED"||t.status==="PENDING",title:"Edit"},{default:n(()=>[l(s(Se),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),t.status==="DRAFT"||t.status==="REJECTED"?(u(),_(s(b),{key:0,variant:"ghost",size:"sm",onClick:r=>W(t),disabled:$.value===t.id,title:"Publish to Meta",class:"text-blue-600 hover:text-blue-700"},{default:n(()=>[$.value===t.id?(u(),_(s(L),{key:0,class:"h-4 w-4 animate-spin"})):(u(),_(s(K),{key:1,class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"])):f("",!0),l(s(b),{variant:"ghost",size:"sm",onClick:r=>ke(t),title:"Delete"},{default:n(()=>[l(s(De),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"])])]),_:2},1024))),128)),Z.value.length===0?(u(),_(s(oe),{key:0,class:"col-span-full"},{default:n(()=>[l(s(ne),{class:"py-12 text-center text-muted-foreground"},{default:n(()=>[l(s(Re),{class:"h-12 w-12 mx-auto mb-4 opacity-50"}),e[23]||(e[23]=a("p",{class:"text-lg font-medium"},"No templates found",-1)),e[24]||(e[24]=a("p",{class:"text-sm mb-4"},"Create a new template or sync from Meta.",-1)),a("div",dt,[l(s(b),{variant:"outline",onClick:J,disabled:!h.value},{default:n(()=>[l(s(me),{class:"h-4 w-4 mr-2"}),e[21]||(e[21]=c(" Sync from Meta ",-1))]),_:1},8,["disabled"]),l(s(b),{onClick:Y},{default:n(()=>[l(s(q),{class:"h-4 w-4 mr-2"}),e[22]||(e[22]=c(" Create Template ",-1))]),_:1})])]),_:1})]),_:1})):f("",!0)])]),_:1})),l(s(ue),{open:U.value,"onUpdate:open":e[12]||(e[12]=t=>U.value=t)},{default:n(()=>[l(s(re),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:n(()=>[l(s(de),null,{default:n(()=>[l(s(ie),null,{default:n(()=>[c(p(T.value?"Edit":"Create")+" Template",1)]),_:1}),l(s(ce),null,{default:n(()=>[c(p(T.value?"Update your message template.":"Create a new WhatsApp message template."),1)]),_:1})]),_:1}),a("div",it,[a("div",ct,[l(s(g),null,{default:n(()=>[...e[25]||(e[25]=[c("WhatsApp Account ",-1),a("span",{class:"text-destructive"},"*",-1)])]),_:1}),N(a("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>d.value.whatsapp_account=t),class:"w-full h-10 rounded-md border bg-background px-3",disabled:!!T.value},[e[26]||(e[26]=a("option",{value:""},"Select account...",-1)),(u(!0),i(k,null,w(E.value,t=>(u(),i("option",{key:t.id,value:t.name},p(t.name),9,mt))),128))],8,pt),[[P,d.value.whatsapp_account]])]),a("div",vt,[a("div",ft,[l(s(g),null,{default:n(()=>[...e[27]||(e[27]=[c("Template Name ",-1),a("span",{class:"text-destructive"},"*",-1)])]),_:1}),l(s(C),{modelValue:d.value.name,"onUpdate:modelValue":e[3]||(e[3]=t=>d.value.name=t),placeholder:"order_confirmation",disabled:!!T.value},null,8,["modelValue","disabled"]),e[28]||(e[28]=a("p",{class:"text-xs text-muted-foreground"},"Lowercase, underscores only",-1))]),a("div",gt,[l(s(g),null,{default:n(()=>[...e[29]||(e[29]=[c("Display Name",-1)])]),_:1}),l(s(C),{modelValue:d.value.display_name,"onUpdate:modelValue":e[4]||(e[4]=t=>d.value.display_name=t),placeholder:"Order Confirmation"},null,8,["modelValue"])])]),a("div",yt,[a("div",_t,[l(s(g),null,{default:n(()=>[...e[30]||(e[30]=[c("Language ",-1),a("span",{class:"text-destructive"},"*",-1)])]),_:1}),N(a("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>d.value.language=t),class:"w-full h-10 rounded-md border bg-background px-3"},[(u(),i(k,null,w(fe,t=>a("option",{key:t.code,value:t.code},p(t.name),9,bt)),64))],512),[[P,d.value.language]])]),a("div",xt,[l(s(g),null,{default:n(()=>[...e[31]||(e[31]=[c("Category ",-1),a("span",{class:"text-destructive"},"*",-1)])]),_:1}),N(a("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>d.value.category=t),class:"w-full h-10 rounded-md border bg-background px-3"},[(u(),i(k,null,w(ge,t=>a("option",{key:t.value,value:t.value},p(t.label)+" - "+p(t.description),9,ht)),64))],512),[[P,d.value.category]])])]),l(s(G)),a("div",kt,[l(s(g),null,{default:n(()=>[...e[32]||(e[32]=[c("Header Type",-1)])]),_:1}),N(a("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>d.value.header_type=t),class:"w-full h-10 rounded-md border bg-background px-3"},[(u(),i(k,null,w(ye,t=>a("option",{key:t.value,value:t.value},p(t.label),9,wt)),64))],512),[[P,d.value.header_type]])]),d.value.header_type==="TEXT"?(u(),i("div",Tt,[l(s(g),null,{default:n(()=>[...e[33]||(e[33]=[c("Header Text",-1)])]),_:1}),l(s(C),{modelValue:d.value.header_content,"onUpdate:modelValue":e[8]||(e[8]=t=>d.value.header_content=t),placeholder:"Enter header text..."},null,8,["modelValue"])])):f("",!0),a("div",Ct,[l(s(g),null,{default:n(()=>[...e[34]||(e[34]=[c("Body Content ",-1),a("span",{class:"text-destructive"},"*",-1)])]),_:1}),l(s(Pe),{modelValue:d.value.body_content,"onUpdate:modelValue":e[9]||(e[9]=t=>d.value.body_content=t),placeholder:"Hi {{1}}, your order #{{2}} has been confirmed...",rows:"4"},null,8,["modelValue"]),e[35]||(e[35]=a("p",{class:"text-xs text-muted-foreground"},' Use {"'+p(1)+'"}, {"'+p(2)+'"}, etc. for dynamic variables ',-1))]),a("div",Vt,[l(s(g),null,{default:n(()=>[...e[36]||(e[36]=[c("Footer (optional)",-1)])]),_:1}),l(s(C),{modelValue:d.value.footer_content,"onUpdate:modelValue":e[10]||(e[10]=t=>d.value.footer_content=t),placeholder:"Thank you for your business!"},null,8,["modelValue"])]),l(s(G)),a("div",Et,[a("div",Ut,[l(s(g),null,{default:n(()=>[...e[37]||(e[37]=[c("Buttons (optional)",-1)])]),_:1}),l(s(b),{type:"button",variant:"outline",size:"sm",onClick:Ce,disabled:d.value.buttons.length>=3},{default:n(()=>[l(s(q),{class:"h-4 w-4 mr-1"}),e[38]||(e[38]=c(" Add Button ",-1))]),_:1},8,["disabled"])]),e[44]||(e[44]=a("p",{class:"text-xs text-muted-foreground"},"Add up to 3 buttons to your template",-1)),(u(!0),i(k,null,w(d.value.buttons,(t,r)=>(u(),i("div",{key:r,class:"border rounded-lg p-3 space-y-3"},[a("div",It,[a("span",$t,"Button "+p(r+1),1),l(s(b),{type:"button",variant:"ghost",size:"sm",onClick:v=>Ve(r)},{default:n(()=>[l(s(Me),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"])]),a("div",At,[a("div",Nt,[l(s(g),{class:"text-xs"},{default:n(()=>[...e[39]||(e[39]=[c("Type",-1)])]),_:1}),N(a("select",{"onUpdate:modelValue":v=>t.type=v,class:"w-full h-9 rounded-md border bg-background px-2 text-sm"},[(u(),i(k,null,w(Te,v=>a("option",{key:v.value,value:v.value},p(v.label),9,Mt)),64))],8,Pt),[[P,t.type]])]),a("div",Lt,[l(s(g),{class:"text-xs"},{default:n(()=>[...e[40]||(e[40]=[c("Button Text",-1)])]),_:1}),l(s(C),{modelValue:t.text,"onUpdate:modelValue":v=>t.text=v,placeholder:"Button text",class:"h-9"},null,8,["modelValue","onUpdate:modelValue"])])]),t.type==="URL"?(u(),i("div",St,[l(s(g),{class:"text-xs"},{default:n(()=>[...e[41]||(e[41]=[c("URL",-1)])]),_:1}),l(s(C),{modelValue:t.url,"onUpdate:modelValue":v=>t.url=v,placeholder:"https://example.com/{{1}}",class:"h-9"},null,8,["modelValue","onUpdate:modelValue"]),e[42]||(e[42]=a("p",{class:"text-xs text-muted-foreground"},'Use {"'+p(1)+'"} for dynamic URL suffix',-1))])):f("",!0),t.type==="PHONE_NUMBER"?(u(),i("div",Dt,[l(s(g),{class:"text-xs"},{default:n(()=>[...e[43]||(e[43]=[c("Phone Number",-1)])]),_:1}),l(s(C),{modelValue:t.phone_number,"onUpdate:modelValue":v=>t.phone_number=v,placeholder:"+1234567890",class:"h-9"},null,8,["modelValue","onUpdate:modelValue"])])):f("",!0)]))),128))]),l(s(G)),F.value.length>0||H.value.length>0?(u(),i("div",Rt,[a("div",null,[l(s(g),null,{default:n(()=>[...e[45]||(e[45]=[c("Sample Values for Variables",-1)])]),_:1}),e[46]||(e[46]=a("p",{class:"text-xs text-muted-foreground mt-1"}," Provide example values for your variables. This helps Meta review and approve your template faster. ",-1))]),H.value.length>0?(u(),i("div",Ot,[e[47]||(e[47]=a("p",{class:"text-sm font-medium text-muted-foreground"},"Header Variables",-1)),(u(!0),i(k,null,w(H.value,t=>(u(),i("div",{key:"header-"+t,class:"flex items-center gap-2"},[a("span",Bt,p(ae(t)),1),a("input",{type:"text",value:ee("header",t),onInput:r=>te("header",t,r.target.value),placeholder:"Example value...",class:"flex-1 h-9 rounded-md border border-input bg-background px-3 text-sm"},null,40,Ft)]))),128))])):f("",!0),F.value.length>0?(u(),i("div",Ht,[e[48]||(e[48]=a("p",{class:"text-sm font-medium text-muted-foreground"},"Body Variables",-1)),(u(!0),i(k,null,w(F.value,t=>(u(),i("div",{key:"body-"+t,class:"flex items-center gap-2"},[a("span",jt,p(ae(t)),1),a("input",{type:"text",value:ee("body",t),onInput:r=>te("body",t,r.target.value),placeholder:"Example value...",class:"flex-1 h-9 rounded-md border border-input bg-background px-3 text-sm"},null,40,zt)]))),128))])):f("",!0)])):f("",!0),a("div",Gt,[a("div",qt,[l(s(Oe),{class:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0"}),a("div",Kt,[e[51]||(e[51]=a("p",{class:"font-medium"},"Template Submission",-1)),a("p",Jt,[e[49]||(e[49]=c(" This creates a local draft. After saving, click the ",-1)),l(s(K),{class:"h-3 w-3 inline"}),e[50]||(e[50]=c(" publish button on the template card to submit it to Meta for approval. ",-1))])])])])]),l(s(pe),null,{default:n(()=>[l(s(b),{variant:"outline",onClick:e[11]||(e[11]=t=>U.value=!1)},{default:n(()=>[...e[52]||(e[52]=[c("Cancel",-1)])]),_:1}),l(s(b),{onClick:he,disabled:O.value},{default:n(()=>[O.value?(u(),_(s(L),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):f("",!0),c(" "+p(T.value?"Update":"Create")+" Template ",1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),l(s(ue),{open:M.value,"onUpdate:open":e[15]||(e[15]=t=>M.value=t)},{default:n(()=>[l(s(re),{class:"max-w-md"},{default:n(()=>[l(s(de),null,{default:n(()=>[l(s(ie),null,{default:n(()=>[...e[53]||(e[53]=[c("Template Preview",-1)])]),_:1}),l(s(ce),null,{default:n(()=>{var t,r;return[c(p(((t=m.value)==null?void 0:t.display_name)||((r=m.value)==null?void 0:r.name)),1)]}),_:1})]),_:1}),m.value?(u(),i("div",Yt,[a("div",Wt,[a("div",Xt,[m.value.header_type&&m.value.header_type!=="NONE"?(u(),i("div",Qt,[m.value.header_type==="TEXT"?(u(),i("div",Zt,p(m.value.header_content),1)):(u(),i("div",ea,[(u(),_(le(Q(m.value.header_type)),{class:"h-8 w-8 text-gray-400"}))]))])):f("",!0),a("div",ta,[a("p",{class:"text-sm whitespace-pre-wrap",innerHTML:Ee(m.value.body_content,m.value.sample_values||[])},null,8,aa)]),m.value.footer_content?(u(),i("div",sa,[a("p",la,p(m.value.footer_content),1)])):f("",!0),m.value.buttons&&m.value.buttons.length>0?(u(),i("div",oa,[(u(!0),i(k,null,w(m.value.buttons,(t,r)=>(u(),i("div",{key:r,class:"border-b last:border-b-0"},[a("button",na,p(t.text||t.title||"Button"),1)]))),128))])):f("",!0)])]),a("div",ua,[a("div",ra,[e[54]||(e[54]=a("span",{class:"text-muted-foreground"},"Status:",-1)),a("span",{class:z(["px-2 py-0.5 rounded text-xs font-medium",X(m.value.status)])},p(m.value.status),3)]),a("div",da,[e[55]||(e[55]=a("span",{class:"text-muted-foreground"},"Category:",-1)),a("span",null,p(m.value.category),1)]),a("div",ia,[e[56]||(e[56]=a("span",{class:"text-muted-foreground"},"Language:",-1)),a("span",null,p(m.value.language),1)]),m.value.meta_template_id?(u(),i("div",ca,[e[57]||(e[57]=a("span",{class:"text-muted-foreground"},"Meta ID:",-1)),a("span",pa,p(m.value.meta_template_id),1)])):f("",!0)])])):f("",!0),l(s(pe),null,{default:n(()=>{var t,r,v;return[l(s(b),{variant:"outline",onClick:e[13]||(e[13]=A=>M.value=!1)},{default:n(()=>[...e[58]||(e[58]=[c("Close",-1)])]),_:1}),((t=m.value)==null?void 0:t.status)==="DRAFT"||((r=m.value)==null?void 0:r.status)==="REJECTED"?(u(),_(s(b),{key:0,onClick:e[14]||(e[14]=A=>{W(m.value),M.value=!1}),disabled:$.value===((v=m.value)==null?void 0:v.id)},{default:n(()=>{var A,se;return[$.value===((A=m.value)==null?void 0:A.id)?(u(),_(s(L),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):(u(),_(s(K),{key:1,class:"h-4 w-4 mr-2"})),c(" "+p(((se=m.value)==null?void 0:se.status)==="REJECTED"?"Resubmit to Meta":"Publish to Meta"),1)]}),_:1},8,["disabled"])):f("",!0)]}),_:1})]),_:1})]),_:1},8,["open"])]))}});export{La as default};
